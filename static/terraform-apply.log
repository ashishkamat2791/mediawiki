[0m[1mmodule.compute.data.aws_availability_zones.data_az: Refreshing state...[0m
[0m[1mmodule.network.data.aws_availability_zones.data_az: Refreshing state...[0m
[0m[1mmodule.network.aws_vpc.mw_vpc: Creating...[0m[0m
[0m[1mmodule.compute.aws_key_pair.mw_key_pair: Creating...[0m[0m
[0m[1mmodule.compute.aws_key_pair.mw_key_pair: Creation complete after 2s [id=mediawiki][0m[0m
[0m[1mmodule.network.aws_vpc.mw_vpc: Still creating... [10s elapsed][0m[0m
[0m[1mmodule.network.aws_vpc.mw_vpc: Creation complete after 10s [id=vpc-01801b027e0034aa3][0m[0m
[0m[1mmodule.network.aws_route_table.mw_rt_private: Creating...[0m[0m
[0m[1mmodule.network.aws_internet_gateway.mw_igw: Creating...[0m[0m
[0m[1mmodule.network.aws_subnet.mw_sub_public_a: Creating...[0m[0m
[0m[1mmodule.network.aws_subnet.mw_sub_public_b: Creating...[0m[0m
[0m[1mmodule.network.aws_subnet.mw_sub_private_a: Creating...[0m[0m
[0m[1mmodule.network.aws_subnet.mw_sub_private_b: Creating...[0m[0m
[0m[1mmodule.network.aws_security_group.mw_sg_public: Creating...[0m[0m
[0m[1mmodule.network.aws_security_group.mw_sg_private: Creating...[0m[0m
[0m[1mmodule.network.aws_route_table.mw_rt_private: Creation complete after 3s [id=rtb-09ff1c43a8715832c][0m[0m
[0m[1mmodule.network.aws_subnet.mw_sub_private_a: Creation complete after 3s [id=subnet-0435ace2340fc1de3][0m[0m
[0m[1mmodule.network.aws_route_table_association.mw_rta_private_a: Creating...[0m[0m
[0m[1mmodule.network.aws_subnet.mw_sub_private_b: Creation complete after 3s [id=subnet-07e0ae49f0575497a][0m[0m
[0m[1mmodule.network.aws_route_table_association.mw_rta_private_b: Creating...[0m[0m
[0m[1mmodule.network.aws_route_table_association.mw_rta_private_a: Creation complete after 1s [id=rtbassoc-080a1c50cef472402][0m[0m
[0m[1mmodule.network.aws_route_table_association.mw_rta_private_b: Creation complete after 1s [id=rtbassoc-0e83ec7b3dd37feb0][0m[0m
[0m[1mmodule.network.aws_internet_gateway.mw_igw: Creation complete after 5s [id=igw-0a15ff3bd5fa047df][0m[0m
[0m[1mmodule.network.aws_route_table.mw_rt_public: Creating...[0m[0m
[0m[1mmodule.network.aws_security_group.mw_sg_private: Creation complete after 8s [id=sg-0cecf1f869ab96847][0m[0m
[0m[1mmodule.compute.aws_instance.mw_instance_db: Creating...[0m[0m
[0m[1mmodule.network.aws_security_group.mw_sg_public: Creation complete after 8s [id=sg-02aab66b249652fd1][0m[0m
[0m[1mmodule.network.aws_route_table.mw_rt_public: Creation complete after 3s [id=rtb-0edb832a2f60bfe43][0m[0m
[0m[1mmodule.network.aws_subnet.mw_sub_public_a: Still creating... [10s elapsed][0m[0m
[0m[1mmodule.network.aws_subnet.mw_sub_public_b: Still creating... [10s elapsed][0m[0m
[0m[1mmodule.network.aws_subnet.mw_sub_public_a: Creation complete after 15s [id=subnet-00e5a782e57484308][0m[0m
[0m[1mmodule.network.aws_route_table_association.mw_rta_public_a: Creating...[0m[0m
[0m[1mmodule.compute.aws_instance.mw_instance_web_a: Creating...[0m[0m
[0m[1mmodule.network.aws_subnet.mw_sub_public_b: Creation complete after 16s [id=subnet-04f741e6ce4f6f006][0m[0m
[0m[1mmodule.network.aws_route_table_association.mw_rta_public_b: Creating...[0m[0m
[0m[1mmodule.compute.aws_instance.mw_instance_web_b: Creating...[0m[0m
[0m[1mmodule.network.aws_route_table_association.mw_rta_public_a: Creation complete after 1s [id=rtbassoc-0fd17893b3d3b8c54][0m[0m
[0m[1mmodule.network.aws_route_table_association.mw_rta_public_b: Creation complete after 1s [id=rtbassoc-0fec40f984bd3d5d2][0m[0m
[0m[1mmodule.compute.aws_instance.mw_instance_db: Still creating... [10s elapsed][0m[0m
[0m[1mmodule.compute.aws_instance.mw_instance_web_a: Still creating... [10s elapsed][0m[0m
[0m[1mmodule.compute.aws_instance.mw_instance_web_b: Still creating... [10s elapsed][0m[0m
[0m[1mmodule.compute.aws_instance.mw_instance_db: Still creating... [20s elapsed][0m[0m
[0m[1mmodule.compute.aws_instance.mw_instance_web_a: Still creating... [20s elapsed][0m[0m
[0m[1mmodule.compute.aws_instance.mw_instance_web_b: Still creating... [20s elapsed][0m[0m
[0m[1mmodule.compute.aws_instance.mw_instance_db: Still creating... [30s elapsed][0m[0m
[0m[1mmodule.compute.aws_instance.mw_instance_db: Creation complete after 31s [id=i-08fceb0c60ba16b4a][0m[0m
[0m[1mmodule.compute.aws_instance.mw_instance_web_a: Creation complete after 30s [id=i-0475e5186ded14f29][0m[0m
[0m[1mmodule.compute.aws_instance.mw_instance_web_b: Still creating... [30s elapsed][0m[0m
[0m[1mmodule.compute.aws_instance.mw_instance_web_b: Still creating... [40s elapsed][0m[0m
[0m[1mmodule.compute.aws_instance.mw_instance_web_b: Creation complete after 42s [id=i-005090e01d29ec2c1][0m[0m
[0m[1mmodule.compute.aws_elb.mw_elb: Creating...[0m[0m
[0m[1mmodule.compute.aws_elb.mw_elb: Still creating... [10s elapsed][0m[0m
[0m[1mmodule.compute.aws_elb.mw_elb: Provisioning with 'local-exec'...[0m[0m
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): Executing: ["/bin/sh" "-c" "cat <<EOF > ../aws_hosts \n[dev-mediawiki-web]\ndev-mediawiki-web-1 ansible_host=3.239.45.203\ndev-mediawiki-web-2 ansible_host=3.89.131.87\n\n[dev-mediawiki-web:vars]\nlb_url=media-wiki-elb-1299164318.us-east-1.elb.amazonaws.com\ndatabase_ip=192.168.2.130\n\n[dev-mediawiki-sql]\ndev-mediawiki-sql-1 ansible_host=192.168.2.130\n\n[dev-mediawiki-sql:vars]\nweb1=192.168.0.119\nweb2=192.168.1.110\nmysql_root_password=root@123\nmediawiki_password=mediawiki@123\n\n[mysql-servers:children]\ndev-mediawiki-sql\n\n[apache-servers:children]\ndev-mediawiki-web\n\nEOF\n"]
[0m[1mmodule.compute.aws_elb.mw_elb: Provisioning with 'local-exec'...[0m[0m
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): Executing: ["/bin/sh" "-c" "              ANSIBLE_HOST_KEY_CHECKING=False \\\n              ansible-playbook \\\n              -i ../aws_hosts \\\n              -u ubuntu \\\n              --private-key mediawiki  \\\n              ../ansible_templates/mediawiki.yaml\n"]
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): [WARNING]: Invalid characters were found in group names but not replaced, use
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): -vvvv to see details
[0m[0m
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): PLAY [apache-servers] **********************************************************
[0m[0m
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): TASK [Gathering Facts] *********************************************************
[0m[1mmodule.compute.aws_elb.mw_elb: Still creating... [20s elapsed][0m[0m
[0m[1mmodule.compute.aws_elb.mw_elb: Still creating... [30s elapsed][0m[0m
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): ok: [dev-mediawiki-web-2]
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): ok: [dev-mediawiki-web-1]
[0m[0m
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): TASK [apt update and upgrade] **************************************************
[0m[1mmodule.compute.aws_elb.mw_elb: Still creating... [40s elapsed][0m[0m
[0m[1mmodule.compute.aws_elb.mw_elb: Still creating... [50s elapsed][0m[0m
[0m[1mmodule.compute.aws_elb.mw_elb: Still creating... [1m0s elapsed][0m[0m
[0m[1mmodule.compute.aws_elb.mw_elb: Still creating... [1m10s elapsed][0m[0m
[0m[1mmodule.compute.aws_elb.mw_elb: Still creating... [1m20s elapsed][0m[0m
[0m[1mmodule.compute.aws_elb.mw_elb: Still creating... [1m30s elapsed][0m[0m
[0m[1mmodule.compute.aws_elb.mw_elb: Still creating... [1m40s elapsed][0m[0m
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): changed: [dev-mediawiki-web-1]
[0m[1mmodule.compute.aws_elb.mw_elb: Still creating... [1m50s elapsed][0m[0m
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): changed: [dev-mediawiki-web-2]
[0m[0m
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): TASK [install apt packages for mediawiki] **************************************
[0m[1mmodule.compute.aws_elb.mw_elb: Still creating... [2m0s elapsed][0m[0m
[0m[1mmodule.compute.aws_elb.mw_elb: Still creating... [2m10s elapsed][0m[0m
[0m[1mmodule.compute.aws_elb.mw_elb: Still creating... [2m20s elapsed][0m[0m
[0m[1mmodule.compute.aws_elb.mw_elb: Still creating... [2m30s elapsed][0m[0m
[0m[1mmodule.compute.aws_elb.mw_elb: Still creating... [2m40s elapsed][0m[0m
[0m[1mmodule.compute.aws_elb.mw_elb: Still creating... [2m50s elapsed][0m[0m
[0m[1mmodule.compute.aws_elb.mw_elb: Still creating... [3m0s elapsed][0m[0m
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): changed: [dev-mediawiki-web-1]
[0m[1mmodule.compute.aws_elb.mw_elb: Still creating... [3m10s elapsed][0m[0m
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): changed: [dev-mediawiki-web-2]
[0m[0m
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): TASK [download mediawiki] ******************************************************
[0m[1mmodule.compute.aws_elb.mw_elb: Still creating... [3m20s elapsed][0m[0m
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): changed: [dev-mediawiki-web-1]
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): changed: [dev-mediawiki-web-2]
[0m[0m
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): TASK [unzip mediawiki] *********************************************************
[0m[1mmodule.compute.aws_elb.mw_elb: Still creating... [3m30s elapsed][0m[0m
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): changed: [dev-mediawiki-web-1]
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): changed: [dev-mediawiki-web-2]
[0m[0m
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): TASK [Create symbolic link] ****************************************************
[0m[1mmodule.compute.aws_elb.mw_elb: Still creating... [3m40s elapsed][0m[0m
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): [WARNING]: Cannot set fs attributes on a non-existent symlink target. follow
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): should be set to False to avoid this.
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): changed: [dev-mediawiki-web-1]
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): changed: [dev-mediawiki-web-2]
[0m[0m
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): TASK [enable php mods] *********************************************************
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): [WARNING]: Consider using 'become', 'become_method', and 'become_user' rather
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): than running sudo
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): changed: [dev-mediawiki-web-1]
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): changed: [dev-mediawiki-web-2]
[0m[0m
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): RUNNING HANDLER [restart apache] ***********************************************
[0m[1mmodule.compute.aws_elb.mw_elb: Still creating... [3m50s elapsed][0m[0m
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): changed: [dev-mediawiki-web-1]
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): changed: [dev-mediawiki-web-2]
[0m[0m
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): RUNNING HANDLER [clean-up mediawiki zip] ***************************************
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): changed: [dev-mediawiki-web-2]
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): changed: [dev-mediawiki-web-1]
[0m[0m
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): PLAY RECAP *********************************************************************
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): dev-mediawiki-web-1        : ok=9    changed=8    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0
[0m[0mmodule.compute.aws_elb.mw_elb (local-exec): dev-mediawiki-web-2        : ok=9    changed=8    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0
[0m[0m
[0m[1mmodule.compute.aws_elb.mw_elb: Creation complete after 3m59s [id=media-wiki-elb][0m[0m
[0m[1mmodule.compute.aws_lb_cookie_stickiness_policy.mw_lb_policy: Creating...[0m[0m
[0m[1mmodule.compute.aws_lb_cookie_stickiness_policy.mw_lb_policy: Creation complete after 2s [id=media-wiki-elb:80:mw-lb-policy][0m[0m
[0m[1m[32m
Apply complete! Resources: 20 added, 0 changed, 0 destroyed.[0m
